{% load static %}
{% load menu_item %}

<!DOCTYPE html>

<html>
	<head>
		<title>{% block title %}Site des élèves{% endblock %}</title>
		<meta charset="UTF-8" />
		<link rel="stylesheet" href="{% static 'css/base.css' %}" />
		<link rel="stylesheet" href="{% static 'contrib/font-awesome-4.4.0/css/font-awesome.min.css' %}" />
		{% block styles %}{% endblock %}
    <script src="{% static 'js/user_container.js' %}" ></script>
		{% block scripts %}{% endblock %}
	</head>
	<body>
		<section id="nav_container" class="">
			<header>
				<div>
					<a href="{% url 'core:index' %}">
						<img id="logo" src="{% static 'images/logo.png' %}" alt="logo" />
					</a>
				</div>
				<nav>
					<ul>
            <li><a href="{% url 'webmail:index' %}"><i class="fa fa-envelope"></i></a></li>
						<li><a href="#"><i class="fa fa-inbox"></i></a></li>
						<li><a href="#"><i class="fa fa-question-circle"></i></a></li>
					</ul>
				</nav>
			</header>
			<main>
				<form action="." method="POST">
					<div>
						{% csrf_token %}
						<input type="text" name="command" autocomplete="off" />
						<i class="fa fa-chevron-right"></i>
					</div>
				</form>
				<nav>
					<ul>
						{% _base_menu_item 'Index' 'core:index' %}
						{% _base_menu_item 'Annuaire' 'accounts:members' %}
						{% _base_menu_item 'Bureau des élèves' 'bde:index' %}
						{% _base_menu_item 'Sondages' 'poll:index' %}
						{% _base_menu_item 'Evènements' 'events:index' %}
					</ul>
				</nav>
			</main>
		</section>

		<section id="main_container">
			<header>
				<h1>
					{% block header %}
						Default title
					{% endblock header %}
				</h1>

				<nav>
					<ul>
						{% block menu %}
						{% endblock menu %}
					</ul>
				</nav>
			</header>
			<main id="main">
				{% block main %}
				{% endblock main %}
			</main>
		</section>

		<section id="user_container" class="">
      <div id="toggle_user_container"><i class="fa fa-chevron-right"></i></div>
			<header>
				{% if request.user.is_active %}
					{% if request.user.profile.picture %}
						<img src="{{ request.user.profile.picture.url }}" alt="picture" />
					{% else %}
						<img src="{% static 'images/default_user_icon.png' %}" alt="picture"/>
					{% endif %}
					{% if request.user.first_name and request.user.last_name %}
						<h1 id="username" class="center">
							{% if request.user.profile.nickname %}
								«{{ request.user.profile.nickname }}»<br/>
							{% endif %}
							{{ request.user.first_name }}
							{{ request.user.last_name }}
						</h1>
					{% else %}
						<h1 id="username" class="center">{{ request.user.username }}</h1>
					{% endif %}
					<nav>
						<ul>
              <li><a href="{% url 'accounts:show' username=request.user.username %}"><i class="fa fa-user"></i> <span>Mon profil</span></a></li>
              <li><a href="{% url 'core:settings' %}"><i class="fa fa-cog"></i> <span>Paramètres</span></a></li>
              <li><a href="{% url 'accounts:logout' %}"><i class="fa fa-sign-out"></i> <span>Deconnexion</span></a></li>
						</ul>
					</nav>
				{% else %}
          <div class="hidden_on_retracted">
            <h1>Connexion<a href="#"> <i class="fa fa-question-circle"></i></a></h1>
            <form action="{% url 'accounts:login' %}" method="POST">
              {% csrf_token %}

              <input type="text" id="email" name="email" placeholder="email"/>
              <input type="password" id="password" name="password" placeholder="password"/>

              <input type="hidden" name="next" value="{{ request.path }}" />
              <button>connexion <i class="fa fa-sign-in"></i></button>
            </form>
          </div>
          <div class="displayed_on_retracted">
            <nav>
              <ul>
                <li><a href="{% url 'accounts:login' %}"><i class="fa fa-sign-in"></i> <span>Connexion</span></a></li>
              </ul>
            </nav>
          </div>
				{% endif %}
			</header>
			<main>

			</main>
		</section>

	</body>
</html>
